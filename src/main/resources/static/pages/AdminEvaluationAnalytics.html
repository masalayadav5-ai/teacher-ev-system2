<link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/css/evaldashboard.css">

<div class="page-header">
    <h2 class="page-title">
        <i class="fas fa-chart-line"></i>
        Admin Evaluation Analytics
    </h2>
    <button class="add-btn addpara" onclick="loadPage('/pages/AdminEvaluation.html')">
            + Add parameter
        </button>
</div>

<p class="page-subtitle">
    View teacher evaluations → course wise → weekly analytics
</p>

<!-- ================= TEACHERS ================= -->
<div class="card-container" id="analyticsTeacherContainer">
    <div class="loading-state">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Loading teachers...</p>
    </div>
</div>

<!-- ================= ANALYTICS MODAL ================= -->
<div id="analyticsModal" class="modal-overlay">
    <div class="modal-card" style="max-width: 900px">

        <div class="modal-header">
            <h2 id="analyticsTeacherName">Teacher Analytics</h2>
            <span class="modal-close" onclick="closeAnalyticsModal()">&times;</span>
        </div>

        <div class="modal-body">

            <!-- COURSE -->
            <div class="form-group">
                <label>Select Course</label>
                <select id="analyticsCourseSelect" onchange="loadAnalyticsWeeks()">
                    <option value="">-- Select Course --</option>
                </select>
            </div>

            <!-- WEEK -->
            <div class="form-group">
                <label>Select Week</label>
                <select id="analyticsWeekSelect" onchange="loadAnalyticsSummary()">
                    <option value="">-- Select Week --</option>
                </select>
            </div>

            <!-- SUMMARY -->
            <div id="analyticsSummary" class="analytics-summary" style="display:none">

    <!-- KPI CARDS -->
    <div class="analytics-kpis">
        <div class="kpi-card">
            <span class="kpi-label">Total Evaluations</span>
            <span class="kpi-value" id="analyticsTotal">0</span>
        </div>

        <div class="kpi-card highlight">
            <span class="kpi-label">Overall Average Rating</span>
            <span class="kpi-value" id="analyticsOverall">0</span>
        </div>
    </div>

    <!-- CHART -->
    <div class="analytics-chart-card">
        <h4>Average Rating per Question</h4>
        <canvas id="analyticsChart"></canvas>
    </div>

    <!-- TABLE -->
    <div class="analytics-table-card">
        <h4>Question-wise Details</h4>
        <table class="analytics-table">
            <thead>
                <tr>
                    <th>Question</th>
                    <th>Avg Rating</th>
                </tr>
            </thead>
            <tbody id="analyticsParams"></tbody>
        </table>
    </div>

</div>


        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/js/AdminEvaluationAnalytics.js"></script>
<script src="/js/evaldashboard.js"></script>


